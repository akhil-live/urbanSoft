<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geo Tagging Update</title>
     <link rel="shortcut icon" href="../assets/images/logo/raj_favicon.png" type="image/png"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css" integrity="sha512-XcIsjKMcuVe0Ucj/xgIXQnytNwBttJbNjltBV18IOnru2lDPe9KRRyvCXw6Y5H415vbBLRm8+q6fmLUU7DfO6Q==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="src/assets/css/admin.css">
    <link rel="stylesheet" href="src/assets/css/responsive.css">

    <style>
        body { font-family: 'Noto sans', sans-serif; }
    </style>
</head>
<body>
    <div class="wrapper">
      <!-- Sidebar -->
      <div class="sidebar" data-background-color="white">
        <div class="sidebar-logo">
          <!-- Logo Header -->
          <div class="logo-header" data-background-color="inky">
            <a href="index.html" class="logo">
              <img src="../assets/images/logo/raj.png" alt="navbar brand" class="navbar-brand" height="44"/>
              <h4 style="color: white; padding: 6px 0 0 8px; font-size: 1rem;"><strong>Nagar Nigam Jaipur</strong></h4>
            </a>
            <div class="nav-toggle">
              <button class="btn btn-toggle toggle-sidebar">
                <i class="gg-menu-right"></i>
              </button>
              <button class="btn btn-toggle sidenav-toggler">
                <i class="gg-menu-left"></i>
              </button>
            </div>
            <button class="topbar-toggler more">
              <i class="gg-more-vertical-alt"></i>
            </button>
          </div>
          <!-- End Logo Header -->
        </div>
        <div class="sidebar-wrapper scrollbar scrollbar-inner">
          <div class="sidebar-content">
            <ul class="nav nav-primary">
              <li class="nav-item">
                <a href="index.html">
                  <i class="ri-home-3-line"></i>
                  <p>Home</p>
                </a>
              </li>
              <li class="nav-item">
                <a data-bs-toggle="collapse" href="#surveyAndQr">
                  <i class="ri-survey-line"></i>
                  <p>Survey & QR for Survay</p>
                  <span class="caret"></span>
                </a>
                <div class="collapse" id="surveyAndQr">
                  <ul class="nav nav-collapse">
                    <li>
                      <a href="survey.html">
                        <span class="sub-item">Survay Dashboard</span>
                      </a>
                    </li>
                    <li>
                      <a href="survey-form.html">
                        <span class="sub-item">Survay Form</span>
                      </a>
                    </li>
                    <li>
                      <a href="search-survey-property.html">
                        <span class="sub-item">Geo-Tagging</span>
                      </a>
                    </li>
                    <li>
                      <a href="survey-report.html">
                        <span class="sub-item">Survay Report</span>
                      </a>
                    </li>
                    <li>
                      <a href="search-survey-notice.html">
                        <span class="sub-item">Ex-Party Notice Distribution</span>
                      </a>
                    </li>
                    <li>
                      <a href="search-survey-qrcode.html">
                        <span class="sub-item">Survey Upload QR Code</span>
                      </a>
                    </li>
                    <li>
                      <a href="survey-qr-upload-report.html">
                        <span class="sub-item">Survey QR Code Report</span>
                      </a>
                    </li>
                    <li>
                      <a href="search-survey-tc-visit.html">
                        <span class="sub-item">Survey Visit Report</span>
                      </a>
                    </li>
                    <li>
                      <a href="search-geotagging-property.html">
                        <span class="sub-item">Geo-Tagging Update</span>
                      </a>
                    </li>
                    <li>
                      <a href="search-survey.html">
                        <span class="sub-item">Search Survey</span>
                      </a>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="nav-item">
                <a href="search-property.html">
                  <i class="ri-community-line"></i>
                  <p>Search Property</p>
                </a>
              </li>
              <li class="nav-item">
                <a data-bs-toggle="collapse" href="#payPropertyTax">
                  <i class="ri-bank-card-line"></i>
                  <p>Pay Property Tax</p>
                  <span class="caret"></span>
                </a>
                <div class="collapse" id="payPropertyTax">
                  <ul class="nav nav-collapse">
                    <li>
                      <a href="pay.html">
                        <span class="sub-item">Pay Dashboard</span>
                      </a>
                    </li>
                    <li>
                      <a href="search-property.html">
                        <span class="sub-item">Search Property</span>
                      </a>
                    </li>
                    <li>
                      <a href="tc-collection-summary.html">
                        <span class="sub-item">Update Ward</span>
                      </a>
                    </li>
                    <li>
                      <a href="geo-tagging-update.html">
                        <span class="sub-item">Geo-Tagging Update</span>
                      </a>
                    </li>
                    <li>
                      <a href="search-survey-visit.html">
                        <span class="sub-item">Search Survey</span>
                      </a>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="nav-item">
                <a href="collection-summary.html">
                  <i class="ri-money-rupee-circle-line"></i>
                  <p>Collection Summary</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="search-visit.html">
                  <i class="ri-file-list-3-line"></i>
                  <p>Visit Report</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="saf-distribution.html">
                  <i class="ri-file-3-line"></i>
                  <p>Saf Form Distribution</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="search-visit.html">
                  <i class="ri-map-pin-5-line"></i>
                  <p>Locate Property</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="search-visit.html">
                  <i class="ri-file-4-line"></i>
                  <p>Appti Form</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="property-qr-code.html">
                  <i class="ri-file-upload-line"></i>
                  <p>Upload QR Code</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="property-qr-code-report.html">
                  <i class="ri-file-info-line"></i>
                  <p>Property QR Code Report</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="property-qr-code-report.html">
                  <i class="ri-qr-scan-2-line"></i>
                  <p>QR Code Scanner</p>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <!-- End Sidebar -->

      <div class="main-panel">
        <div class="main-header">
          <div class="main-header-logo">
            <!-- Logo Header -->
            <div class="logo-header" data-background-color="inky">
              <a href="index.html" class="logo">
                <img src="../assets/images/logo/raj.png" alt="navbar brand" class="navbar-brand" height="20"/>
                <h6 style="color: white; padding: 6px 0 0 8px;"><strong>Nagar Nigam Jaipur</strong></h6>
              </a>
              <div class="nav-toggle">
                <button class="btn btn-toggle toggle-sidebar">
                  <i class="gg-menu-right"></i>
                </button>
                <button class="btn btn-toggle sidenav-toggler">
                  <i class="gg-menu-left"></i>
                </button>
              </div>
              <button class="topbar-toggler more">
                <i class="gg-more-vertical-alt"></i>
              </button>
            </div>
            <!-- End Logo Header -->
          </div>
          <!-- Navbar Header -->
          <nav
            class="navbar navbar-header navbar-header-transparent navbar-expand-lg border-bottom"
          >
            <div class="container-fluid">
              <ul class="navbar-nav topbar-nav ms-md-auto align-items-center">
                <li class="nav-item topbar-icon dropdown hidden-caret">
                  <a class="nav-link" href="index.html">
                    <i class="ri-home-3-line" style="font-size: 20px;"></i>
                  </a>
                </li>
                <li class="nav-item topbar-user dropdown hidden-caret">
                  <a class="dropdown-toggle profile-pic" data-bs-toggle="dropdown" href="#" aria-expanded="false" >
                    <div class="avatar-sm">
                      <img src="src/images/profile/user.png" alt="profile" class="avatar-img rounded-circle" />
                    </div>
                    <span class="profile-username">
                      <span class="op-7"></span>
                      <span class="fw-bold">Admin Name</span>
                    </span>
                  </a>
                  <ul class="dropdown-menu dropdown-user animated fadeIn">
                    <div class="dropdown-user-scroll scrollbar-outer">
                      <li>
                        <div class="user-box">
                          <div class="avatar-lg">
                            <img src="src/images/profile/user.png" alt="image profile" class="avatar-img rounded" />
                          </div>
                          <div class="u-text">
                            <h4>Admin Name</h4>
                            <p class="text-muted">Employee id</p>
                          </div>
                        </div>
                      </li>
                      <li>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#">My Profile</a>
                        <a class="dropdown-item" href="change-password.html">Change Password</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#">Logout</a>
                      </li>
                    </div>
                  </ul>
                </li>
                <li class="nav-item topbar-icon dropdown hidden-caret">
                  <a class="nav-link" href="#">
                    <i class="ri-logout-box-r-line" style="font-size: 20px;"></i>
                  </a>
                </li>
              </ul>
            </div>
          </nav>
          <!-- End Navbar -->
        </div>

        <div class="modal fade" id="fileModal" tabindex="-1" >
          <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">

              <div class="modal-header">
                <h5 class="modal-title">File Preview</h5>

                <div class="btn-group me-2 ms-2">
                  <button id="fullscreenBtn" class="btn btn-sm btn-outline-primary d-none" onclick="toggleFullscreen()">
                    <i class="ri-fullscreen-line"></i>
                  </button>
                </div>

                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
              </div>

              <div class="modal-body">

                <div id="zoomControls" class="mb-2 text-center d-none">
                  <button class="btn btn-sm btn-info" onclick="zoomIn()"><i class="ri-add-line"></i></button>
                  <button class="btn btn-sm btn-info" onclick="zoomOut()"><i class="ri-subtract-line"></i></button>
                  <button class="btn btn-sm btn-secondary" onclick="resetZoom()">Reset</button>
                </div>

                <div id="fileContainer"
                    style="width:100%; height:75vh; max-height:calc(100vh - 160px); overflow:auto; text-align:center;">
                </div>

              </div>
            </div>
          </div>
        </div>

        <div class="container">
          <div class="page-inner">
            <div class="page-header d-print-none">
              <h4 class="fw-bold mb-3">Property Geo-Tagging Update</h4>
            </div>
            <div class="row">
              <div class="col-md-12">
                <div class="card card-stats card-round">
                  <div class="card-header d-print-none text-start">
                      <a href="search-survey-property.html"><button class="btn btn-black btn-sm"><strong><i class="ri-arrow-left-circle-line"></i></i> Back</strong></button></a>
                  </div>
                  <div class="card-body">
                    <div class="row">
                      <h5 class="pb-1"><strong>Basic Details</strong></h5>
                      <div class="col-lg-3 col-md-3 col-sm-6">
                        <div class="form-group">
                          <label for="serviceNo">Service No.</label>
                           <p class="fw-bold">SRV282255</p>
                        </div>
                      </div>
                      <div class="col-lg-3 col-md-3 col-sm-6">
                        <div class="form-group">
                          <label for="dlcArea">DLC Area</label>
                          <p class="fw-bold">SFS AGRAWAL FARM -</p>
                        </div>
                      </div>
                      <div class="col-lg-3 col-md-3 col-sm-6">
                        <div class="form-group">
                          <label for="ward">Ward</label>
                          <p class="fw-bold">46</p>  
                        </div>                       
                      </div>
                      <div class="col-lg-3 col-md-3 col-sm-6">
                        <div class="form-group">
                          <label for="surveyDate">Survey Date</label>
                            <p class="fw-bold">15-10-2020</p>  
                        </div>                       
                      </div>
                      <div class="col-lg-3 col-md-3 col-sm-6">
                        <div class="form-group">
                          <label for="roadName">Road Name</label>
                            <p class="fw-bold">Vikramaditya Marg</p>   
                        </div>                       
                      </div>
                      <div class="col-lg-3 col-md-3 col-sm-6">
                        <div class="form-group">
                          <label for="propertyUsageType">Property Usage Type</label>
                            <p class="fw-bold">Residential - Individual House</p>   
                        </div>                       
                      </div>
                      <div class="col-lg-3 col-md-3 col-sm-6">
                        <div class="form-group">
                          <label for="ownershipType">Ownership Type</label>
                            <p class="fw-bold">Allotment Land/House</p>   
                        </div>                       
                      </div>
                      <div class="col-lg-3 col-md-3 col-sm-6">
                        <div class="form-group">
                          <label for="noOfFloors">No. of Floors</label>
                            <p class="fw-bold">3</p>   
                        </div>                       
                      </div>
                    </div>
                    <div class="row">
                      <h5 class="pt-2"><strong>Owners Details</strong></h5>
                      <div class="col-lg-3 col-md-3 col-sm-6">
                        <div class="form-group">
                          <label for="ownerName">Owner Name</label>
                          <p class="fw-bold">Property Owner</p>  
                        </div>
                      </div>
                      <div class="col-lg-3 col-md-3 col-sm-6">
                        <div class="form-group">
                          <label for="guardianName">Guardian Name</label>
                          <p class="fw-bold">NA</p>  
                        </div>
                      </div>
                      <div class="col-lg-3 col-md-3 col-sm-6">
                        <div class="form-group">
                          <label for="age">Age</label>
                          <p class="fw-bold">40</p>  
                        </div>
                      </div>
                      <div class="col-lg-3 col-md-3 col-sm-6">
                        <div class="form-group">
                          <label for="mobileNo">Profession</label>
                          <p class="fw-bold">Service</p>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <h5 class="pt-2"><strong>Property Details</strong></h5>
                      <div class="col-lg-3 col-md-3 col-sm-6">
                        <div class="form-group">
                          <label for="roadType">Road Type</label>
                          <p class="fw-bold">Interior Road</p>   
                        </div>                       
                      </div>
                      <div class="col-lg-3 col-md-3 col-sm-6">
                        <div class="form-group">
                          <label for="plotArea">Plot Area (in Sq Yd)</label>
                          <p class="fw-bold">89.00</p>
                        </div>
                      </div>
                      <div class="col-lg-3 col-md-3 col-sm-6">
                        <div class="form-group">
                          <label for="plinthArea">Plinth Area (in Sq Yd)</label>
                          <p class="fw-bold">89.00</p>
                        </div>
                      </div>
                      <div class="col-lg-3 col-md-3 col-sm-6">
                        <div class="form-group">
                          <label for="vacantArea">Vacant Area (in Sq Yd) </label>
                          <p class="fw-bold">0.00</p>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <h5 class="pt-2"><strong>Floor Details</strong></h5>
                          <div class="col-lg-3 col-md-3 col-sm-6">
                            <div class="form-group">
                              <label for="floorName">Floor No. </label>
                              <p class="fw-bold">Ground Floor</p>  
                            </div>                       
                          </div>
                          <div class="col-lg-3 col-md-3 col-sm-6">
                            <div class="form-group">
                              <label for="useType">Use Type</label>
                              <p class="fw-bold">Residential</p>   
                            </div>                       
                          </div>
                          <div class="col-lg-3 col-md-3 col-sm-6">
                            <div class="form-group">
                              <label for="usageType ">Usage Sub Category</label>
                              <p class="fw-bold">General</p>
                            </div>                       
                          </div>
                          <div class="col-lg-3 col-md-3 col-sm-6">
                            <div class="form-group">
                              <label for="builtUpArea">Built Up Area (in Sq ft)</label>
                              <p class="fw-bold">800.00 Sq ft.</p>
                            </div>
                          </div>
                          <div class="col-lg-3 col-md-3 col-sm-6">
                            <div class="form-group">
                              <label for="fromYear">From Year</label>
                              <p class="fw-bold">2007-2008</p>  
                            </div>                       
                          </div>
                          <div class="col-lg-3 col-md-3 col-sm-6">
                            <div class="form-group">
                              <label for="uptoYear">Upto Year</label>
                              <p class="fw-bold">2020-2021</p>   
                            </div>                       
                          </div>
                    </div>
                    <div class="row">
                      <h5 class="py-2"><strong>Geotagging</strong></h5>
                      <div class="col-lg-6 col-md-6 col-sm-6 col-12">
                        <div class="form-group">
                          <label for="latitude">Latitude</label>
                           <input type="text" id="latitude" name="latitude" class="form-control" placeholder="Enter latitude">
                        </div>
                      </div>
                      <div class="col-lg-6 col-md-6 col-sm-6 col-12">
                        <div class="form-group">
                          <label for="longitude">Longitude</label>
                          <input type="text" id="longitude" name="longitude" class="form-control" placeholder=" Enter longitude">
                        </div>
                      </div>
                      <div class="col-lg-4 col-md-4 col-sm-4 col-12">
                        <div class="form-group">
                          <label for="frontImage">Front Image</label>
                          <input type="file" class="form-control mb-3" id="frontImage" name="frontImage" />
                          <a href="javascript:void(0);" onclick="openModal('image', 'upload/images/propimage.jpg')"><img width='200px' src='upload/images/propimage.jpg'/></a>
                        </div>
                      </div>
                      <div class="col-lg-4 col-md-4 col-sm-4 col-12">
                        <div class="form-group">
                          <label for="leftImage">Left Image</label>
                          <input type="file" class="form-control mb-3" id="leftImage" name="leftImage" />
                          <a href="javascript:void(0);" onclick="openModal('image', 'upload/images/propimage.jpg')"><img width='200px' src='upload/images/propimage.jpg'/></a>
                        </div>
                      </div>
                      <div class="col-lg-4 col-md-4 col-sm-4 col-12">
                        <div class="form-group">
                          <label for="rightImage">Right Image</label>
                          <input type="file" class="form-control mb-3" id="rightImage" name="rightImage" />
                          <a href="javascript:void(0);" onclick="openModal('image', 'upload/images/propimage.jpg')"><img width='200px' src='upload/images/propimage.jpg'/></a>
                        </div>
                      </div>
                    </div>
                    <div class="d-print-none">
                        <p class="text-center pt-3">
                          <button type="submit" class="btn btn-success btn-sm" name="submit"><strong>Update</strong></button>
                        </p>
                    </div>
                  </div>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- footer start -->
        <footer class="footer">
          <div class="container-fluid d-flex justify-content-between">
            <div class="copyright">
              <a href="#" target="_blank">Rajasthan Municipal</a>
            </div>
          </div>
        </footer>
        <!-- footer end -->
      </div>
    </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.scrollbar/0.2.11/jquery.scrollbar.min.js" integrity="sha512-5AcaBUUUU/lxSEeEcruOIghqABnXF8TWqdIDXBZ2SNEtrTGvD408W/ShtKZf0JNjQUfOiRBJP+yHk6Ab2eFw3Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="src/assets/js/datatables/datatables.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
<script src="src/assets/js/admin.js"></script>
<script>
      $(document).ready(function () {
        $("#basic-datatables").DataTable({});

        $("#multi-filter-select").DataTable({
          pageLength: 10,
          initComplete: function () {
            this.api()
              .columns()
              .every(function () {
                var column = this;
                var select = $(
                  '<select class="form-select"><option value=""></option></select>'
                )
                  .appendTo($(column.footer()).empty())
                  .on("change", function () {
                    var val = $.fn.dataTable.util.escapeRegex($(this).val());

                    column
                      .search(val ? "^" + val + "$" : "", true, false)
                      .draw();
                  });

                column
                  .data()
                  .unique()
                  .sort()
                  .each(function (d, j) {
                    select.append(
                      '<option value="' + d + '">' + d + "</option>"
                    );
                  });
              });
          },
        });

        // Add Row
        $("#add-row").DataTable({
          pageLength: 10,
        });

        var action =
          '<td> <div class="form-button-action"> <button type="button" data-bs-toggle="tooltip" title="" class="btn btn-link btn-primary btn-lg" data-original-title="Edit Task"> <i class="fa fa-edit"></i> </button> <button type="button" data-bs-toggle="tooltip" title="" class="btn btn-link btn-danger" data-original-title="Remove"> <i class="fa fa-times"></i> </button> </div> </td>';

        $("#addRowButton").click(function () {
          $("#add-row")
            .dataTable()
            .fnAddData([
              $("#addName").val(),
              $("#addPosition").val(),
              $("#addOffice").val(),
              action,
            ]);
          $("#addRowModal").modal("hide");
        });
      });


    function printTable(areaID) 
    {
        var printContent = document.getElementById(areaID).innerHTML;
        var originalContent = document.body.innerHTML;
        document.body.innerHTML = printContent;
        window.print();
        document.body.innerHTML = originalContent;
    }

    function exportExcel() {
        let table = $('#basic-datatables').DataTable();
        let data = table.rows({ search: 'applied' }).data().toArray();
        let ws = XLSX.utils.aoa_to_sheet([
            table.columns().header().toArray().map(th => th.innerText),
            ...data
        ]);
        let wb = XLSX.utils.book_new();
        XLSX.utils.book_append_sheet(wb, ws, "Sheet1");
        XLSX.writeFile(wb, "data.xlsx");
    }

      let scale = 1;
      const step = 0.2;
      const minScale = 0.5;
      const maxScale = 4;
      let isFullscreen = false;

      function openModal(type, fileUrl) {
        const container = document.getElementById('fileContainer');
        const zoomControls = document.getElementById('zoomControls');
        const fullscreenBtn = document.getElementById('fullscreenBtn');

        scale = 1;
        container.innerHTML = '';
        zoomControls.classList.add('d-none');
        fullscreenBtn.classList.add('d-none');

        if (type === 'image') {
          zoomControls.classList.remove('d-none');
          fullscreenBtn.classList.remove('d-none');

          container.innerHTML = `
            <img id="previewImage"
                src="${fileUrl}"
                class="img-fluid"
                style="transform:scale(1); transition:transform .15s ease; cursor:zoom-in; user-select: none;">
          `;

          enableImageInteractions();
        }

        if (type === 'pdf') {
          
          container.innerHTML = `
            <iframe src="${fileUrl}"
                    style="width:100%; height:100%; border:none;">
            </iframe>
          `;
        }

        new bootstrap.Modal(document.getElementById('fileModal')).show();
      }


      function zoomIn() {
        if (scale < maxScale) scale += step;
        applyZoom();
      }

      function zoomOut() {
        if (scale > minScale) scale -= step;
        applyZoom();
      }

      function resetZoom() {
        scale = 1;
        applyZoom();
      }

      function applyZoom() {
        const img = document.getElementById('previewImage');
        if (img) {
          img.style.transform = `scale(${scale})`;
        }
      }

      function enableImageInteractions() {
        const img = document.getElementById('previewImage');
        const container = document.getElementById('fileContainer');

        img.addEventListener('wheel', function (e) {
          e.preventDefault();
          e.deltaY < 0 ? zoomIn() : zoomOut();
        });

        img.addEventListener('dblclick', function () {
          scale = scale === 1 ? 2 : 1;
          applyZoom();
        });
      }

      function toggleFullscreen() {
        const modalContent = document.querySelector('#fileModal .modal-content');

        if (!document.fullscreenElement) {
          modalContent.requestFullscreen();
          isFullscreen = true;
        } else {
          document.exitFullscreen();
          isFullscreen = false;
        }
      }

      document.getElementById('fileModal')
        .addEventListener('hidden.bs.modal', () => {
          document.getElementById('fileContainer').innerHTML = '';
          scale = 1;
          if (document.fullscreenElement) {
            document.exitFullscreen();
          }
        });
    </script>
</body>

</html>
